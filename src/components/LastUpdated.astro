---
interface Props {
  lastUpdated: string;
}

const { lastUpdated } = Astro.props;

function formatToJST(dateString: string): string {
  const date = new Date(dateString);
  
  const options: Intl.DateTimeFormatOptions = {
    year: 'numeric',
    month: '2-digit',
    day: '2-digit',
    hour: '2-digit',
    minute: '2-digit',
    timeZone: 'Asia/Tokyo',
    hour12: false
  };
  
  const formatter = new Intl.DateTimeFormat('ja-JP', options);
  const parts = formatter.formatToParts(date);
  
  const dateParts: { [key: string]: string } = {};
  parts.forEach(part => {
    dateParts[part.type] = part.value;
  });
  
  return `${dateParts.year}年${dateParts.month}月${dateParts.day}日 ${dateParts.hour}:${dateParts.minute} JST`;
}

const formattedDate = formatToJST(lastUpdated);
---

<div class="last-updated">
  <span class="label">最終更新:</span>
  <time datetime={lastUpdated} class="datetime">
    {formattedDate}
  </time>
</div>

<style>
  .last-updated {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background-color: #f5f5f5;
    border-radius: 0.25rem;
    font-size: 0.9rem;
  }

  .label {
    font-weight: 600;
    color: #666;
  }

  .datetime {
    color: #333;
  }
</style>